try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c6881438-e60f-400f-9e73-d0eab02ebdd1",e._sentryDebugIdIdentifier="sentry-dbid-c6881438-e60f-400f-9e73-d0eab02ebdd1")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"landing-client-rspack-arm64@16bbc019b29226c9a21b14bfc04acd34ef160b9c"};"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["1599"],{89739:function(e,t,i){i.r(t),i.d(t,{firstImageLoadCustomEventNameMap:()=>u,FORTESTONLYLatencyMetrics:()=>g,default:()=>f});var a=i(86860),r=i(77504),n=i(60438),o=i(70208),s=i(52447),c=i(13165),l=i(71031),d=i(76496),h=i(11549);let u={home:"home.feed.image",recipe_tab:"recipe_tab.item.image",recipe_detail:"recipe_detail.item.image"},m="undefined"!=typeof window?window.performance:void 0;class g{constructor(){window.logCodeUsage&&window.logCodeUsage("client/disorganized/analytics/LatencyMetrics.ts"),this.isDebug=("undefined"!=typeof window&&window?.location?.search||"").indexOf("latency_debug=")>=0,this.mode="path",this.preInitTime=Math.round(m?.now()||0),this.pathChangedAt=0,this.isDebug&&this.preInitTime&&r.Z.debug(`ðŸ“ pre init time: ${Math.round(this.preInitTime)}ms`,{owner:r.Z.defaultOwner()}),this.pathChanged=!1,this.isMobile=function(){try{return(0,n.y0)().deviceInfo.isMobile}catch(e){if("undefined"==typeof window)return!1;return r.Z.error("Unable to retrieve isMobile flag",{error:e,owner:"customers_platform"}),!1}}(),this.eventsRecorded={},this.filHasTracked=!1,this.viewId=(0,a.Z)(),this.visibilityChangeCount=0,this.historyReplaceCount=0,"undefined"!=typeof window&&(window.addEventListener("load",()=>this.onLoadEvent(),{once:!0}),this.visibilityChangeListener=()=>{this.visibilityChangeCount+=1},document.addEventListener("visibilitychange",this.visibilityChangeListener))}configure(e){let{history:t}=e;this.historyUnlisten&&this.historyUnlisten(),this.history=t,this.setSurface(t.location),this.historyUnlisten=t.listen((e,t)=>{if("REPLACE"!==t)this.pathReset(),this.setSurface(e);else e.state&&"object"==typeof e.state&&e.state[d.F]?this.pathReset():this.historyReplaceCount+=1,this.setSurface(e)})}trackWith(e,t,i,a){return this.doTrack(e,t,i,{trackingProperties:a})}setScrollTarget(e){this.scrollTarget=e}isCurrentLocation(e){return e.pathname===this.location?.pathname}setMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mode:"interaction"};if(this.baseReset(),"interaction"===e.mode||"omit"===e.mode){let{mode:t}=e;this.mode=t,this.interactionStartAt=m?.now()||0,this.isDebug&&r.Z.debug(`ðŸ“ mode: ${t}, time: ${this.interactionStartAt}`,{owner:r.Z.defaultOwner()})}else if("overlay"===e.mode){let{mode:t,overlaySurface:i}=e;this.mode=t,this.interactionStartAt=m?.now()||0,this.overlaySurface=i,this.isDebug&&r.Z.debug(`ðŸ“ mode: overlay, time: ${this.interactionStartAt}, overlaySurface: ${i}`,{owner:r.Z.defaultOwner()})}else this.interactionStartAt=void 0,this.isDebug&&r.Z.debug(`ðŸ“ mode: omit`,{owner:r.Z.defaultOwner()})}doTrack(e,t,i,a){let{trackingProperties:n}=a;if(!this.history||!this.surface||"omit"===this.mode||!("undefined"!=typeof window&&void 0!==window.performance&&"now"in window.performance&&"timeOrigin"in window.performance))return;let o=this.eventsRecorded[i]||0;if(o+=1,this.eventsRecorded[i]=o,![1,2,4,8,16].includes(o))return;let c="number"==typeof n?.eventTime&&n.eventTime||m?.now()||0,d=this.pathChangedAt,g=this.pathChanged,f=`${this.surface}`;if("interaction"===this.mode||"overlay"===this.mode){if(!this.interactionStartAt)return;d=this.interactionStartAt,g=!0,"overlay"===this.mode&&(f=`${this.overlaySurface}`)}let p=Math.round(c-d),w=0!==(this.scrollTarget?this.scrollTarget.scrollTop:"undefined"!=typeof window&&window.scrollY)&&"overlay"!==this.mode,y={...n,time:p,number:o,mode:this.mode,viewId:this.viewId,surface:f,lastSurface:this.lastSurface,mobile:this.isMobile,scrolled:w,spa:g,tab_visible_change:this.visibilityChangeCount>0,...!g&&this.coldStartBreakdown(),...!g&&this.coldStartDebugProperties(n,p),networkInformation:this.networkInformation(),hardwareInformation:this.hardwareInformation(),build_system:"rspack",isc_environment:function(){try{let{ISC_ENVIRONMENT:e}=(0,l.Zb)();return e}catch(e){"undefined"!=typeof window&&r.Z.warn("LatencyMetrics: Unable to retrieve client config",{error:e,owner:"customers_platform"});return}}()};1===y.number&&this.isDebug&&(r.Z.debug(`ðŸ“ track: first image latency ${t}.${i} ${y.time}ms`,{data:y,owner:r.Z.defaultOwner()}),"undefined"!=typeof window&&(window.__do_not_use_me_fil_latency=window.__do_not_use_me_fil_latency||{},window.__do_not_use_me_fil_latency[`${t}.${i}`]=p)),e(t,i,y);let _=(u[f]||"shop.item.image")===`${t}.${i}`&&1===y.number&&!this.filHasTracked;return _&&(e("page","fil",y),s.x8.mark("page.fil",{startTime:c}),s.x8.measure("page.rfil",{start:0,end:Math.max(s.x8.now(),p)}),this.filHasTracked=!0),{firstImageLoad:_,data:{eventTime:c,startTime:d,spa:g,imgSrc:(0,h.y)(n)?n.imageLatency.imgSrc:void 0}}}pathReset(){this.mode="path",this.interactionStartAt=void 0,this.viewId=(0,a.Z)(),this.pathChanged=!0,this.pathChangedAt=m?.now()||0,this.baseReset(),this.isDebug&&r.Z.debug(`ðŸ“ pathReset, time: ${this.pathChangedAt}`,{owner:r.Z.defaultOwner()})}baseReset(){this.eventsRecorded={},this.filHasTracked=!1,this.visibilityChangeCount=0,this.historyReplaceCount=0,(0,c.ro)(),this.isDebug&&"undefined"!=typeof window&&(window.__do_not_use_me_fil_latency=void 0)}setSurface(e){if(this.lastSurface=this.surface,this.surface=void 0,void 0===e)return;let t=e.pathname;this.location=e,this.surface=(0,o.n)(t),this.isDebug&&r.Z.debug(`ðŸ“ setSurface: ${this.surface}`,{owner:r.Z.defaultOwner()})}networkInformation(){let e=!!("undefined"!=typeof window&&window.navigator&&window.navigator.connection);if(!e)return{supported:e};let{rtt:t,downlink:i}=window.navigator.connection;return{supported:e,rtt:t,downlink:i}}hardwareInformation(){let e=!!("undefined"!=typeof window&&window.navigator);if(!e)return{supported:e};let{hardwareConcurrency:t,deviceMemory:i}=window.navigator;return{supported:e,hardwareConcurrency:t,deviceMemory:i||null}}onLoadEvent(){this.trackColdStartTiming()}getNavigationTiming(){return"undefined"!=typeof window&&window.performance?.getEntriesByType?.("navigation").at(0)}coldStartBreakdown(){let e=this.getNavigationTiming();if(!e||!this.preInitTime)return{coldStartTimingClientSupport:!1};let{fetchStart:t,domainLookupStart:i,connectStart:a,responseStart:r,requestStart:n,responseEnd:o}=e;return{coldStartTimingClientSupport:!0,coldStartRedirectOverhead:t,coldStartAppCacheOverhead:i-t,coldStartDnsOverhead:a-i,coldStartTcpOverhead:n-a,coldStartRequestOverhead:r-n,coldStartResponseOverhead:o-r,coldStartNetworkOverhead:o-t,coldStartPreInitOverhead:this.preInitTime}}coldStartDebugProperties(e,t){return{ssr_fil:!!((0,h.y)(e)&&e.imageLatency.ssr),ssr_bailout:(window.logCodeUsage&&window.logCodeUsage("client/platform/shared/performance/ssrBailoutDetection.ts"),!1),history_change:this.historyReplaceCount>0,long_fil:t>=3e4}}trackColdStartTiming(){}get lastNavigationTime(){return this.pathChangedAt}}let f=new g},11549:function(e,t,i){i.d(t,{y:()=>c,m:()=>l});var a=i(53368);i(2784);var r=i(77504),n=i(70992),o=i(72764);let s=new WeakSet;function c(e){return window.logCodeUsage&&window.logCodeUsage("client/platform/shared/imageLatency/imageLatency.ts"),!!(e&&"imageLatency"in e)}function l(e){let t,i,r;window.logCodeUsage&&window.logCodeUsage("client/platform/shared/imageLatency/imageLatency.ts");let n=(0,a.c)(6);n[0]!==e?(t=async(t,i)=>{let a=t.currentSrc,r=(window.logCodeUsage&&window.logCodeUsage("client/platform/shared/imageLatency/ssrImageDetection.ts"),s.has(t));await h(t)&&e({imageLatency:{imgSrc:a,time:i,ssr:r},eventTime:i})},n[0]=e,n[1]=t):t=n[1];let c=t;n[2]!==c?(i={onLoad:c,registerHandler:d},n[2]=c,n[3]=i):i=n[3];let{ref:l}=(0,o.ZP)(i);return n[4]!==l?(r={ref:l},n[4]=l,n[5]=r):r=n[5],r}function d(e){let{element:t,state:i,loadCallback:a}=e,n=window.__IC_IMAGE_LATENCY__;return n?i!==o.U9.Error?i===o.U9.Success?void function(e,t){if(e.isConnected)return t();requestAnimationFrame(()=>t())}(t,()=>a(n.timings.get(t)||performance.now())):n.registerListener(t,a):void 0:void r.Z.error(Error("image latency window API not found"),{owner:"customers_platform"})}async function h(e){return await new Promise(e=>{if("visible"===document.visibilityState)return e();document.addEventListener("visibilitychange",function t(){"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",t),e())})}),new Promise(t=>{let i=(0,n.N7)(e,e=>{i(),t(e)})})}},72764:function(e,t,i){i.d(t,{U9:()=>o,ZP:()=>c});var a,r=i(53368),n=i(2784);let o=((a={}).Pending="Pending",a.Success="Success",a.Error="Error",a),s=()=>{};function c(e){let t,i,a,c,l,d,h;window.logCodeUsage&&window.logCodeUsage("client/platform/shared/useImageLoad.ts");let u=(0,r.c)(13),{onLoad:m,onError:g,registerHandler:f}=e,p=void 0===g?s:g,w=(0,n.useRef)(void 0),y=(0,n.useRef)(void 0);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>()=>{y.current?.()},i=[],u[0]=t,u[1]=i):(t=u[0],i=u[1]),(0,n.useEffect)(t,i),u[2]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{let t=e.currentSrc,i=w.current===t;return w.current=t,i},u[2]=a):a=u[2];let _=a;u[3]!==m?(c=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];_(e)||m(e,...i)},u[3]=m,u[4]=c):c=u[4];let b=c;u[5]!==p?(l=e=>{_(e)||p(e)},u[5]=p,u[6]=l):l=u[6];let v=l;u[7]!==v||u[8]!==b||u[9]!==f?(d=e=>{(y.current&&(y.current(),y.current=void 0),e)&&(y.current=f({element:e,state:(window.logCodeUsage&&window.logCodeUsage("client/platform/shared/useImageLoad.ts"),e.complete)?0===e.naturalHeight?o.Error:o.Success:o.Pending,loadCallback:function(){for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];b(e,...i)},errorCallback:()=>{v(e)}}))},u[7]=v,u[8]=b,u[9]=f,u[10]=d):d=u[10];let S=d;return u[11]!==S?(h={ref:S},u[11]=S,u[12]=h):h=u[12],h}},52447:function(e,t,i){i.d(t,{x8:()=>r}),i(53368);var a=i(77504);i(2784),i(84605);let r=new class{constructor(){if(window.logCodeUsage&&window.logCodeUsage("client/store/platform/shared/performance/PerformanceMetrics.ts"),this.tags={spa:!1,surface:void 0,lastSurface:void 0,scrolled:!1,build_system:"rspack"},this.locationChangedAt=0,this.onHistoryChangeCallbacks=new Set,this.history=void 0,this.getSurfaceFromPathName=()=>void 0,!this.supportsPerformance())return;this.setupHistoryListener()}configure(e){let{history:t,getSurfaceFromPathName:i}=e;this.history=t,this.tags.surface=i(t.location.pathname),this.getSurfaceFromPathName=i,this.setupHistoryListener()}async measure(e,t,i){if(this.supportsPerformance())try{let a=await this.getTags();if(!t&&!i)return performance.measure(e,{start:this.locationChangedAt,end:i,detail:a});if("object"==typeof t)return performance.measure(e,{start:t.duration?void 0:this.locationChangedAt,...t,detail:{...a,..."object"==typeof t.detail?t.detail:void 0}});return performance.measure(e,{start:t,end:i,detail:a})}catch(e){a.Z.warn("performanceMetrics.measure failed",{error:e,owner:"customers_platform"})}}mark(){if(this.supportsPerformance())return performance.mark(...arguments)}clearMarks(){if(this.supportsPerformance())return performance.clearMarks(...arguments)}clearMeasures(){if(this.supportsPerformance())return performance.clearMeasures(...arguments)}now(){return this.supportsPerformance()?performance.now()-this.locationChangedAt:0}getLocationChangedAt(){return this.locationChangedAt}getTagsSync(){return this.tags}getTags(){return new Promise(e=>{this.supportsPerformance()?requestAnimationFrame(()=>{e({...this.tags,scrolled:window.scrollY>0})}):e(this.tags)})}onHistoryChange(e){return this.onHistoryChangeCallbacks.add(e),()=>{this.onHistoryChangeCallbacks.delete(e)}}supportsPerformance(){return"undefined"!=typeof window&&"undefined"!=typeof performance}setTags(e){this.tags={...this.tags,...e}}setupHistoryListener(){this.history?.listen(()=>{this.onHistoryChangeCallbacks.forEach(e=>e(this.tags)),this.setTags({spa:!0,surface:this.getSurfaceFromPathName(this.history?.location.pathname??""),lastSurface:this.tags.surface}),this.locationChangedAt=performance.now()})}};i(62675),i(87695),i(7879),i(93946);var n=i(2097);class o extends n.Z{constructor(){window.logCodeUsage&&window.logCodeUsage("client/store/platform/shared/performance/TTICollector.ts"),super(),this.next=()=>{throw Error("Calling `next` is not allowed")},this.recordedMetrics=new Map}add(e){let{id:t,...i}=e;this.recordedMetrics.has(t)||(this.recordedMetrics.set(t,i),("undefined"==typeof window||window.location.pathname===i.pathname)&&super.next(i))}}new o,i(70208)},13165:function(e,t,i){function a(){return{fetchMap:new Map,instrumentedQueryEntries:[],queryResourceTimings:new Map,imageResourceTimings:new Map,ssrQueryEntries:[],ssrWaterfallTiming:void 0}}function r(){window.logCodeUsage&&window.logCodeUsage("client/store/platform/shared/performance/queryPerf/instrumentation.ts"),a()}i.d(t,{ro:()=>r}),i(52959),i(77504),i(40729),i(39186),a()},70208:function(e,t,i){i.d(t,{n:()=>f,v:()=>p});var a=i(53368),r=i(93946),n=i(7279);let o=["/:retailerSlug/browse_departments","/browse"],s="/:retailerSlug/collections/:collectionSlug",c=`${s}/subjects/:subjectId?`,l="/:retailerSlug/departments/:id",d=`${l}/aisles/:id`,h=n.uv.newSearchResults.path,u=["/items/:item_id","/:retailerSlug/products/:productId"],m=["/recipes/:recipe_id","/tiktok_recipes/:recipe_id"],g=["/partner_recipes","/partner_recipes/tiktok"];function f(e){return(window.logCodeUsage&&window.logCodeUsage("client/store/platform/shared/performance/surface.ts"),(0,r.matchPath)(e,{path:h}))?"search":(0,r.matchPath)(e,{path:d})?"aisle":(0,r.matchPath)(e,{path:l})?"department":(0,r.matchPath)(e,{path:o})?"explore":(0,r.matchPath)(e,{path:"/:retailerSlug/buy_it_again"})?"your_items":(0,r.matchPath)(e,{path:"/:retailerSlug/storefront"})?"storefront":(0,r.matchPath)(e,{path:"/",exact:!0})?"home":(0,r.matchPath)(e,{path:"/directory",exact:!0})?"store_directory":(0,r.matchPath)(e,{path:c})?"subjects":(0,r.matchPath)(e,{path:s})?"collections":(0,r.matchPath)(e,{path:"/hub/ready_meals/:child_collection_slug?"})?"meals_collections_hub":(0,r.matchPath)(e,{path:"/hub/deals_tab/:child_collection_slug?"})?"deals_collections_hub":(0,r.matchPath)(e,{path:"/hub/late_night/:child_collection_slug?"})?"late_night_collections_hub":(0,r.matchPath)(e,{path:"/hub/:hub_name/:child_collection_slug?"})?"collections_hub":(0,r.matchPath)(e,{path:"/checkout_v3"})||(0,r.matchPath)(e,{path:"/checkout_v4"})?"checkout":(0,r.matchPath)(e,{path:u})?"item_details":(0,r.matchPath)(e,{path:"/orders/:order_id"})?"order_status":(0,r.matchPath)(e,{path:"/:retailerSlug/recipes",exact:!0})?"recipe_tab":(0,r.matchPath)(e,{path:"/:retailerSlug/recipes/:recipe_id"})?"recipe_detail":(0,r.matchPath)(e,{path:m})?"agnostic_recipe_detail":(0,r.matchPath)(e,{path:g})?"partner_recipe_detail":(0,r.matchPath)(e,{path:"/brands/:brandPageSlug"})?"brand_page":(0,r.matchPath)(e,{path:"/:retailerSlug/brands/:brandPageSlug"})?"display_brand_page":(0,r.matchPath)(e,{path:"/:retailerSlug/campaign/:brandPageSlug"})?"campaign_landing_page":(0,r.matchPath)(e,{path:"/s"})?"cross_retailer_search":(0,r.matchPath)(e,{path:"/list/:list_id"})?"agnostic_list_detail":(0,r.matchPath)(e,{path:"/your-lists"})?"agnostic_your_lists":(0,r.matchPath)(e,{path:"/:retailerSlug/list/:list_id"})?"list_detail":(0,r.matchPath)(e,{path:"/:retailerSlug/your-lists"})?"your_lists":(0,r.matchPath)(e,{path:"/:retailerSlug/checkout_aisle"})?"checkout_aisle":(0,r.matchPath)(e,{path:"/pages/:slug"})?"multi_retailer_page":(0,r.matchPath)(e,{path:"/:retailerSlug/flyer"})?"flyer":(0,r.matchPath)(e,{path:"/:retailerSlug/shop/:slug"})?"discovery_page":void 0}function p(){let e,t;window.logCodeUsage&&window.logCodeUsage("client/store/platform/shared/performance/surface.ts");let i=(0,a.c)(4),n=(0,r.useLocation)();return i[0]!==n.pathname?(e=f(n.pathname),i[0]=n.pathname,i[1]=e):e=i[1],i[2]!==e?(t={surface:e},i[2]=e,i[3]=t):t=i[3],t}}}]);